# （TODO）Campus Connect项目说明文档

## 项目简介

**Campus Connect**是一个校园信息发布平台，有分享身边趣事、交流校园动态和发布二手交易信息等多种多样的功能。

## 前后端部署说明

详见`forum/README.md`中的**Getting Started**。

## 操作指南

详见 `forum/README.md` 中的 **Campus Connect操作指南**

## Demo演示视频

TODO 详见 TODO TODO

## 设计与实现

### 前后端实现

该项目基于**Flutter**开发，并使用**Firebase**作为后端数据库和存储解决方案，同时利用Firebase提供的认证服务和云函数来处理后端逻辑。

- **Flutter**：跨平台的移动应用开发框架，用于构建美观且高性能的移动应用界面。
- **Firebase**：全面的移动和Web应用开发平台，提供多种云端服务和工具，简化开发和管理过程。
  - **Firebase数据库**：用于存储和同步应用数据的云端NoSQL数据库。
  - **Firebase身份验证**：提供安全的用户认证和身份管理功能，确保应用数据的访问权限。
  - **Firebase存储**：用于在云端安全地存储用户上传的图片等文件。
  - **Firebase云函数**：无服务器的后端代码托管服务，用于执行自定义逻辑和处理请求。

### 用戶相关功能

| 功能点       | 设计与实现                                                   |
| ------------ | ------------------------------------------------------------ |
| 注册与登录   | 1. **注册和密码设置**：使用`Firebase`和`FirebaseUIAuth`库进行身份验证，利用`SignInScreen`组件中实现注册与登录页面。 <br />2. **修改用户名、头像、简介和密码**：在修改页面中，保存按钮被点击后，将更新用户的信息，并将其保存到Firebase的Cloud Firestore数据库中，以供后续使用。 <br /> |
| 私信         | TODO                                                         |
| 用户个人页面 | 1. **关注和取消关注、关注列表、信息界面显示已关注**：点击关注按钮时，根据当前的关注状态，更新Cloud Firestore数据库中用户的关注列表，在关注页面中以`ListView`呈现，在信息列表或信息详情界面显示关注。<br/>2. **实现用户屏蔽功能**：点击屏蔽按钮时，更新Cloud Firestore数据库中用户的屏蔽列表，在信息查看界面进行分类浏览时排除已屏蔽用户的内容。 |

### 信息发布

| 功能点                   | 设计与实现                                                   |
| ------------------------ | ------------------------------------------------------------ |
| 发布图片+文字            | 通过调用`ImagePicker`库选择图片文件，并将其上传到Firebase Storage中保存。在Cloud Firestore数据库中创建新的帖子文档，包含图片的下载URL和帖子内容等信息。 |
| 发布视频+文字            | 通过调用`ImagePicker`库选择视频文件，并将其上传到Firebase Storage中保存。在Cloud Firestore数据库中创建新的帖子文档，包含视频的下载URL和帖子内容等信息。 |
| 添加位置信息             | 使用`Geolocator`库获取当前设备的位置信息，并将经纬度保存在Cloud Firestore数据库中的帖子文档中。 |
| 添加信息类型             | 通过在界面中选择标签（"校园资讯"、"二手交易"），将选定的标签保存在Cloud Firestore数据库中的帖子文档中。 |
| 支持markdown格式         | 使用`TextFormField`组件在界面中输入Markdown格式的文本，并将其保存在Cloud Firestore数据库中的帖子文档中。支持多级标题、列表、文字加粗 |
| 修改字体大小、颜色、粗细 | 通过使用`Slider`组件调整字体大小，使用`BlockPicker`选择字体颜色。将选定的字体大小、颜色等信息保存在Cloud Firestore数据库中的帖子文档中。 |
| 调用相机拍照、录影       | 使用`ImagePicker`库调用相机功能，通过`ImageSource.camera`参数指定使用相机进行拍照或录影。 获取拍照或录影的结果，使用`FirebaseStorage`库将图片或视频上传到Firestore Storage，获取相应的下载链接。 |

### 信息查看与操作

| 功能点                         | 设计与实现                                                   |
| ------------------------------ | ------------------------------------------------------------ |
| 按属性分类浏览                 | 根据Cloud Firestore数据库中已关注的发布者、点赞评论量、信息类型的变量过滤显示的帖子 |
| 按发布时间、点赞量、评论量排序 | 根据Cloud Firestore数据库中发布时间、点赞量、评论量的变量排序显示的帖子 |
| 点赞或取消点赞，收藏或取消收藏 | 根据Cloud Firestore数据库，更新帖子的点赞数、收藏状态和点赞状态，收藏的帖子在Favorites页面中以ListView显示。 |
| 评论                           | Firebase Firestore监听帖子的评论数据流。 使用`StreamBuilder`构建评论列表，并根据评论数据的数量动态生成评论项，包括评论者的姓名、评论内容和评论时间。 |
| 分享                           | 通过使用`share`库中的`Share.share()`方法实现，接受要分享的文本内容和可选的主题作为参数，然后触发分享操作。 |
| 信息详情页面                   | 点击帖子后进入到信息详情页面，信息详情页面用户可以查看帖子的详细信息，并在评论框中输入评论内容，然后点击发送按钮将评论保存到数据库中，并更新评论。 |

### 通知

| 功能点                                                   | 设计与实现 |
| -------------------------------------------------------- | ---------- |
| 收到私信、信息被点赞、回复、关注用户发布新信息时接收通知 | TODO       |
| 个人中心界面进入通知消息列表，查看通知详情、回复私信     | TODO       |

### 搜索

| 功能点           | 设计与实现 |
| ---------------- | ---------- |
| 搜索控件         | TODO       |
| 多关键词联合搜索 | TODO       |

### UI 设计与交互 

实现了以下页面：信息浏览界面、信息详情界面、评论界面、信息发布界面、个人中心(设置)界面、收藏信息列表界面、个人主页及其他用户主页(可按时间线展示用户发布信息)、私信界面、关注列表界面

在内容加载或界面切换时，我们使用了动画效果，提升了用户体验。

## TODO 分工与贡献情况

- 陈敬文：主要负责Post相关功能的实现
- 江灿：主要负责私信、搜索等功能的实现
- 田晋恺：主要负责用户相关功能的实现